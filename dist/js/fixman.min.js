function FixMan(e){var t=this;this.event=new SjEvent,this.fixedObjList=[],this.globalSetup={},e&&this.setup(e),window.addEventListener("resize",function(e){t.resize(e)}),document.addEventListener("scroll",function(e){t.whenScroll(e)})}try{var crossman=require("@sj-js/crossman"),ready=crossman.ready,getEl=crossman.getEl,newEl=crossman.newEl,getData=crossman.getData,SjEvent=crossman.SjEvent}catch(e){}FixMan.EVENT_AFTERDETECT="afterdetect",FixMan.EVENT_DETACH="detach",FixMan.EVENT_ANIMATIONBYOBJECTHEIGHT="animationbyobjectheight",FixMan.EVENT_ANIMATIONSTARTBYOBJECTHEIGHT="animationstartbyobjectheight",FixMan.EVENT_ANIMATIONDOINGBYOBJECTHEIGHT="animationdoingbyobjectheight",FixMan.EVENT_ANIMATIONENDBYOBJECTHEIGHT="animationendbyobjectheight";try{module.exports=exports=FixMan}catch(e){}FixMan.prototype.addEventListener=function(e,t,n){return this.event.addEventListener(e,t,n)},FixMan.prototype.addEventListenerByEventName=function(e,t){return this.event.addEventListenerByEventName(e,t)},FixMan.prototype.hasEventListener=function(e,t,n){return this.event.hasEventListener(e,t,n)},FixMan.prototype.hasEventListenerByEventName=function(e,t){return this.event.hasEventListenerByEventName(e,t)},FixMan.prototype.hasEventListenerByEventFunc=function(e){return this.event.hasEventListenerByEventFunc(e)},FixMan.prototype.removeEventListener=function(e,t,n){return this.event.removeEventListener(e,t,n)},FixMan.prototype.removeEventListenerByEventName=function(e,t){return this.event.removeEventListenerByEventName(e,t)},FixMan.prototype.removeEventListenerByEventFunc=function(e){return this.event.removeEventListenerByEventFunc(e)},FixMan.prototype.execEventListener=function(e,t,n){return this.event.execEventListener(e,t,n)},FixMan.prototype.execEventListenerByEventName=function(e,t){return this.event.execEventListenerByEventName(e,t)},FixMan.prototype.execEvent=function(e,t,n){return this.event.execEvent(e,t,n)},FixMan.prototype.setup=function(e){for(var t in e)this.globalSetup[t]=e[t];return this},FixMan.prototype.detect=function(e){var t=this;return ready(function(){var n;n=document.querySelectorAll("[data-fixed]");for(var i=0;i<n.length;i++)t.add(n[i]);e&&e(t),t.hasEventListenerByEventName("afterdetect")&&t.execEventListenerByEventName("afterdetect")}),this},FixMan.prototype.add=function(e){getEl(e).addClass("sj-obj-fixable"),this.fixedObjList.push(e)},FixMan.prototype.resize=function(e){for(var t,n=0;n<this.fixedObjList.length;n++)t=this.fixedObjList[n],t.qMenuY=null,"fixed"==t.style.position&&(t.parentNode==t.emptyDiv.parentNode&&getEl(t.emptyDiv).removeFromParent(),getEl(t).removeClass("sj-obj-fixed").setStyle("position","").setStyle("top",t.qMenuY+"px"));this.whenScroll(e)},FixMan.prototype.whenScroll=function(e){this.checkFixableObject()},FixMan.prototype.checkFixableObject=function(){for(var e=0;e<this.fixedObjList.length;e++)try{var t=this,n=this.fixedObjList[e];if(n.qMenuY||"fixed"==n.style.position||(n.qMenuY=n.offsetTop,n.qMenuX=n.offsetLeft,n.qMenuCssText=n.style.cssText,n.qMenuWidth=n.clientWidth,n.qMenuHeight=n.clientHeight,n.qMenuClassName=n.className),n.emptyDiv||(n.emptyDiv=newEl("div").style(n.qMenuCssText).returnElement(),n.emptyDiv.clientWidth||(n.emptyDiv.style.width=n.qMenuWidth),n.emptyDiv.clientHeight||(n.emptyDiv.style.height=n.qMenuHeight)),0>n.qMenuY-getEl().getBodyScrollY()){if("fixed"!=n.style.position){if(getEl(n.emptyDiv).setStyle("opacity",0),n.qMenuClassName){var i=n.qMenuClassName.split(" ");getEl(n.emptyDiv).addClass(i)}n.parentNode.insertBefore(n.emptyDiv,n.nextSibling),function(){getEl(n).addClass("sj-obj-fixed").setStyle("position","fixed").setStyle("top","0").setStyle("left",n.qMenuX+"px")}()}}else"fixed"==n.style.position&&(n.parentNode==n.emptyDiv.parentNode&&getEl(n.emptyDiv).removeFromParent(),function(){getEl(n).removeClass("sj-obj-fixed").setStyle("position","").setStyle("top",n.qMenuY+"px")}());t.animationByObjectHeight(n)}catch(s){}},FixMan.prototype.animationByObjectHeight=function(e){var t=window.scrollY,n=e.qMenuY,i=e.emptyDiv.getBoundingClientRect().top+t,s=Math.max(0,t-i),a=s/n,o=Math.min(1,a),r=1-o;e.statusFixed&&0>=o?(e.statusFixed=!1,e.statusOverHeight=!1,this.execEventListener(e,FixMan.EVENT_DETACH,e)):!e.statusFixed&&0<o?(e.statusFixed=!0,e.statusOverHeight=!1,this.execEventListener(e,FixMan.EVENT_ANIMATIONSTARTBYOBJECTHEIGHT,e)):e.statusFixed&&e.statusOverHeight&&0<o&&o<1?(e.statusFixed=!0,e.statusOverHeight=!1,this.execEventListener(e,FixMan.EVENT_ANIMATIONDOINGBYOBJECTHEIGHT,e)):e.statusFixed&&!e.statusOverHeight&&1==o&&(e.statusFixed=!0,e.statusOverHeight=!0,this.execEventListener(e,FixMan.EVENT_ANIMATIONENDBYOBJECTHEIGHT,e)),this.execEventListener(e,FixMan.EVENT_ANIMATIONBYOBJECTHEIGHT,{object:e,rateLimit:o,rateReal:a,fixableObjectHeight:n,rateLimitReverse:r})},FixMan.prototype.animationFadeInByTime=function(){if(!obj.statusFadeIn){obj.statusFadeIn=!0;var e=2e3,t=(new Date).getTime(),n=obj;""==n.style.opacity&&(n.style.opacity=1),function(){var i=(new Date).getTime()-t,s=Math.min(1,i/e);n.style.transform="scaleY("+s+")"}()}},FixMan.prototype.animationFadeOutByTime=function(){if(!obj.statusFadeOut){obj.statusFadeOut=!0;var e=2e3,t=(new Date).getTime(),n=obj;""==n.style.opacity&&(n.style.opacity=1),function i(){var s=(new Date).getTime()-t,a=Math.min(1,s/e),o=1-a;n.style.transform="scaleY("+o+")",a>=1||setTimeout(i,16)}()}};